<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Tidepool Finance</title>
  <meta name="description" content="A modern data-driven wealth management service.">
  <meta name="author" content="Tidepool Finance">

  <meta property="og:title" content="Tidepool Finance">
  <meta property="og:type" content="website">
  <meta property="og:url" content="tidepool.finance">
  <meta property="og:description" content="A modern data-driven wealth management service.">
  <meta property="og:image" content="image.png">

  <link rel="icon" href="/favicon.ico">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

</head>

<body>
    <div class="container mt-5 d-flex align-items-center justify-content-center">
        <div class="flex-col-lg">
            <h1>Tidepool Finance</h1>
        </div>
    </div>
    <div class="container mt-5">
        <div class="d-flex flex-column d-lg-flex flex-lg-row align-items-center justify-content-around text-center">
            <div class="p-2 w-100">
                <svg xmlns="http://www.w3.org/2000/svg" width="30%" fill="currentColor" class="bi bi-file-earmark-bar-graph" viewBox="0 0 16 16">
                  <path d="M10 13.5a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v6zm-2.5.5a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-1zm-3 0a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-1z"/>
                  <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                </svg>
                <p class="mt-5">Current data count: <span class="text-secondary" id='dataCount'></span> <span class="text-secondary">million data points</span></p>
            </div>
            <div class="p-2 w-100">
                <svg xmlns="http://www.w3.org/2000/svg" width="30%" fill="currentColor" class="bi bi-activity" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M6 2a.5.5 0 0 1 .47.33L10 12.036l1.53-4.208A.5.5 0 0 1 12 7.5h3.5a.5.5 0 0 1 0 1h-3.15l-1.88 5.17a.5.5 0 0 1-.94 0L6 3.964 4.47 8.171A.5.5 0 0 1 4 8.5H.5a.5.5 0 0 1 0-1h3.15l1.88-5.17A.5.5 0 0 1 6 2Z"/>
                </svg>
                <p class="mt-5">Current data speed: <span class="text-secondary" id='dataRate'></span> <span class="text-secondary">points / second</span></p>
            </div>
            <div class="p-2 w-100">
                <svg xmlns="http://www.w3.org/2000/svg" width="30%" fill="currentColor" class="bi bi-hdd-stack" viewBox="0 0 16 16">
                  <path d="M14 10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h12zM2 9a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2H2z"/>
                  <path d="M5 11.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM14 3a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h12zM2 2a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2z"/>
                  <path d="M5 4.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
                </svg>
                <p class="mt-5">Current data size: <span class="text-secondary" id='dataSize'></span> <span class="text-secondary">GB</span></p>
            </div>
        </div>
    </div>
    
  <!-- your content here... -->
    <div id="tester" style="width:600px;height:250px;"></div>
    <script>
        function httpGetAsync(theUrl, callback)
        {
            console.log("Making a request to url: " + url)
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() { 
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                    callback(xmlHttp.responseText);
            }
            xmlHttp.open("GET", theUrl, true); // true for asynchronous 
            xmlHttp.send(null);
        }
        
        function loadStats(data) {
            data = JSON.parse(data);
            
            dataCount = Math.round((data['count'] / 1e6) * 100) / 100;
            dataRate = Math.round(data['data_rate'] * 100) / 100;
            dataSize = Math.round(data['count'] * (80/1e9) * 100) / 100;
            
            document.getElementById('dataCount').innerHTML = dataCount;
            document.getElementById('dataRate').innerHTML = dataRate;
            document.getElementById('dataSize').innerHTML = dataSize;
        }
      
        url = 'https://api.tidepool.finance/v1/stats/latest/raw';
        httpGetAsync(url, loadStats);
    </script>
    <script src="https://cdn.plot.ly/plotly-2.11.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
</body>
</html>